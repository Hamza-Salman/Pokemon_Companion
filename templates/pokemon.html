{% extends "layout.html" %}

{% block main %}

<style>
    .pokemon-card {
        border-radius: 20px;
        padding: 20px;
        background: white;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .pokemon-img {
        image-rendering: pixelated;
        max-width: 200px;
    }
    .chip {
        display: inline-block;
        padding: 6px 12px;
        margin: 3px;
        background: #e8e8e8;
        border-radius: 12px;
        font-size: 0.9rem;
    }

    /* Type Badge Styling (matches previous approach) */
    .type-badge {
        display: inline-block;
        padding: 5px 12px;
        margin-right: 6px;
        color: white;
        border-radius: 12px;
        font-size: 0.9rem;
        text-transform: capitalize;
    }
    .type-normal   { background:#A8A77A; }
    .type-fire     { background:#EE8130; }
    .type-water    { background:#6390F0; }
    .type-electric { background:#F7D02C; }
    .type-grass    { background:#7AC74C; }
    .type-ice      { background:#96D9D6; }
    .type-fighting { background:#C22E28; }
    .type-poison   { background:#A33EA1; }
    .type-ground   { background:#E2BF65; }
    .type-flying   { background:#A98FF3; }
    .type-psychic  { background:#F95587; }
    .type-bug      { background:#A6B91A; }
    .type-rock     { background:#B6A136; }
    .type-ghost    { background:#735797; }
    .type-dragon   { background:#6F35FC; }
    .type-dark     { background:#705746; }
    .type-steel    { background:#B7B7CE; }
    .type-fairy    { background:#D685AD; }
</style>

<div class="container py-3">

    <!-- Header -->
    <div class="text-center mb-4">
        <h1 class="fw-bold">{{ pokemon.name | title }}</h1>
        <h5 class="text-muted">#{{ pokemon.id }}</h5>
    </div>

    <!-- Main Pokémon Card -->
    <div class="pokemon-card row align-items-center">

        <!-- Pokémon Images -->
        <div class="col-md-5 text-center">

            <h5 class="fw-semibold mb-2">Sprites</h5>

            <div class="d-flex justify-content-center gap-4">

                <!-- Regular -->
                <div class="text-center">
                    <img 
                        src="{{ pokemon.sprite }}" 
                        alt="{{ pokemon.name }} (Regular)"
                        class="pokemon-img"
                    >
                    <div class="mt-1 text-muted small">Regular</div>
                </div>

                <!-- Shiny -->
                <div class="text-center">
                    <img 
                        src="{{ pokemon.shiny }}" 
                        alt="{{ pokemon.name }} (Shiny)"
                        class="pokemon-img"
                    >
                    <div class="mt-1 text-warning small">Shiny ✨</div>
                </div>

            </div>

        </div>

        <!-- Info Section -->
        <div class="col-md-7">

            <!-- Types -->
            <h4 class="mt-3">Types</h4>
            {% for type in pokemon.types %}
                <span class="type-badge type-{{ type }}">{{ type }}</span>
            {% endfor %}

            <!-- Abilities -->
            <h4 class="mt-3">Abilities</h4>
            {% for ability in pokemon.abilities %}
                <span class="chip">{{ ability }}</span>
            {% endfor %}

        </div>
    </div>

    <!-- Moves Section (refactored) -->
    <div class="pokemon-card mt-4">
        <h3 class="fw-bold">Moves</h3>

        {% if pokemon.moves %}
        <div class="table-responsive mt-3">
            <table class="table table-striped align-middle text-center">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">Move</th>
                        <th scope="col">Type</th>
                        <th scope="col">Power</th>
                        <th scope="col">Accuracy</th>
                        <th scope="col">PP</th>
                    </tr>
                </thead>
                <tbody>
                    {% for move in pokemon.moves %}
                    <tr>
                        <td>{{ move.name | title }}</td>
                        <td>
                            <span class="type-badge type-{{ move.type }}">
                                {{ move.type }}
                            </span>
                        </td>
                        <td>{{ move.power if move.power else "-" }}</td>
                        <td>{{ move.accuracy if move.accuracy else "-" }}</td>
                        <td>{{ move.pp }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
            <p>No moves found.</p>
        {% endif %}
    </div>

    <!-- Evolutions Section -->
    <div class="pokemon-card mt-4">
        <h3 class="fw-bold">Evolutions</h3>

        {% if evolutions %}
            <div class="d-flex flex-wrap align-items-center">
                {% for evolution in evolutions %}
                    <div class="text-center p-3">
                        <img 
                            src="{{ evolution.sprite }}" 
                            class="img-fluid"
                            style="max-width:120px;"
                        >
                        <p class="mt-2 fw-semibold">{{ evolution.name | title }}</p>
                        <small class="text-muted">#{{ evolution.id }}</small>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No evolution data.</p>
        {% endif %}
    </div>

</div>

{% endblock %}
